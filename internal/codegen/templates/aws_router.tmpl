//AUTOGENERATED CODE DO NOT EDIT
package aws

import (
	"github.com/gin-gonic/gin"
	"github.com/sheacloud/cloud-inventory/internal/api/routes"
    "github.com/sheacloud/cloud-inventory/internal/db"
{{range $index, $element := .Services}}	"github.com/sheacloud/cloud-inventory/internal/api/routes/aws/{{$element.Name}}"
{{end}}
)

// GetAwsMetadata godoc
// @Summary      Get Aws Metadata
// @Description  get a list of Aws metadata
// @Tags         aws
// @Produce      json
// @Security     ApiKeyAuth
// @Success      200  {array}   routes.AwsMetadata
// @Failure      400
// @Router       /metadata/aws [get]
func GetAwsMetadata(c *gin.Context) {
	c.IndentedJSON(200, routes.AwsMetadata{
		Services: []string{
{{range $index, $element := .Services}}         "{{$element.Name}}",
{{end}}		},
	})
}

func AddMetadataRoutes(r *gin.RouterGroup, dao db.ReaderDAO) {

    r.GET("/", GetAwsMetadata)
	
{{range $index, $element := .Services}} r.GET("/{{$element.Name}}", {{$element.Name}}.Get{{$element.ServiceCapName}}Metadata)
{{end}}

    {{range $serviceIndex, $serviceElement := .Services}}
{{range $resourceIndex, $resourceElement := $serviceElement.Resources}}
    r.GET("/{{$serviceElement.Name}}/{{$resourceElement.Name}}", func(c *gin.Context) {
		{{$serviceElement.Name}}.Get{{$resourceElement.ObjectPluralName}}Metadata(c, dao)
	})
{{end}}
{{end}}
}

func AddInventoryRoutes(r *gin.RouterGroup, dao db.ReaderDAO) {
{{range $serviceIndex, $serviceElement := .Services}}

{{range $resourceIndex, $resourceElement := $serviceElement.Resources}}
    r.GET("/{{$serviceElement.Name}}/{{$resourceElement.Name}}", func(c *gin.Context) {
        {{$serviceElement.Name}}.List{{$resourceElement.ObjectPluralName}}(c, dao)
    })
    r.GET("/{{$serviceElement.Name}}/{{$resourceElement.Name}}/:{{$resourceElement.ObjectUniqueIdSnakeCase}}", func(c *gin.Context) {
        {{$serviceElement.Name}}.Get{{$resourceElement.ObjectSingularName}}(c, dao)
    })
{{end}}
{{end}}
}


func AddDiffRoutes(r *gin.RouterGroup, dao db.ReaderDAO) {
{{range $serviceIndex, $serviceElement := .Services}}

{{range $resourceIndex, $resourceElement := $serviceElement.Resources}}
    r.GET("/{{$serviceElement.Name}}/{{$resourceElement.Name}}", func(c *gin.Context) {
        {{$serviceElement.Name}}.DiffMulti{{$resourceElement.ObjectPluralName}}(c, dao)
    })
    r.GET("/{{$serviceElement.Name}}/{{$resourceElement.Name}}/:{{$resourceElement.ObjectUniqueIdSnakeCase}}", func(c *gin.Context) {
        {{$serviceElement.Name}}.DiffSingle{{$resourceElement.ObjectSingularName}}(c, dao)
    })
{{end}}
{{end}}
}