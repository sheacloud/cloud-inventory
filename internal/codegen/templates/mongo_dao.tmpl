//AUTOGENERATED CODE DO NOT EDIT
package mongo

import (
    "context"
    "go.mongodb.org/mongo-driver/mongo"
    "github.com/sheacloud/cloud-inventory/internal/db"
    "github.com/sheacloud/cloud-inventory/pkg/meta"
)

type MongoDAO struct {
    db *mongo.Database
    awsDao *MongoAWSDAO 
}

func (dao *MongoDAO) AWS() db.AWSDAO {
    return dao.awsDao
}

func (dao *MongoDAO) WriteInventoryResults(ctx context.Context, metadata *meta.InventoryResults) error {
    _, err := dao.db.Collection("inventory_results").InsertOne(ctx, metadata)
    return err
}

func (dao *MongoDAO) WriteIngestionTimestamp(ctx context.Context, metadata *meta.IngestionTimestamp) error {
    _, err := dao.db.Collection("ingestion_timestamps").InsertOne(ctx, metadata)
    return err
}

type MongoAWSDAO struct {
    db *mongo.Database
{{range $index, $element := .Services}}	{{$element.Name}}DAO db.{{$element.ServiceCapName}}DAO
{{end}}
}

{{range $index, $element := .Services}}func (dao *MongoAWSDAO) {{$element.ServiceCapName}}() db.{{$element.ServiceCapName}}DAO {
    return dao.{{$element.Name}}DAO
}
{{end}}

func NewMongoDAO(db *mongo.Database) *MongoDAO {
    return &MongoDAO{
        db: db,
        awsDao: NewMongoAWSDAO(db),
    }
}

func NewMongoAWSDAO(db *mongo.Database) *MongoAWSDAO {
    return &MongoAWSDAO{
        db: db,
{{range $index, $element := .Services}}	{{$element.Name}}DAO: &Mongo{{$element.ServiceCapName}}DAO{db: db},
{{end}}
    }
}